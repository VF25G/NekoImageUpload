(this["webpackJsonpneko-image-upload"]=this["webpackJsonpneko-image-upload"]||[]).push([[3],{100:function(e,t,n){},102:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(9),a=n.n(o),c=(n(100),n(101),n(102),n(13)),u=n(74),l=n.n(u),s=n(32),p=n(5),f=n(14),m=n(131),b=n(65),h=n(69);function y(){var e=Object(c.a)(["\n  margin-left: 4px;\n  font-size: 12px;\n  &.ant-btn-primary {\n    background: #52565C;\n    border-color: #52565C;\n    border-radius: 4px;\n    color: #B2B3B5;\n  }\n  @media (min-width: 576px) {\n    font-size: 14px;\n  }\n  @media (min-width: 768px) {\n    margin-left: 10px;\n  }\n"]);return y=function(){return e},e}function g(){var e=Object(c.a)(["\n  margin-left: auto;\n"]);return g=function(){return e},e}function d(){var e=Object(c.a)(["\n  color: #83868A;\n  margin-left: 4px;\n  font-size: 12px;\n  &:hover{\n   color:#ACAAA7;\n  }\n  &.active {\n    color: white;\n  }\n  @media (min-width: 576px) {\n    margin-left: 8px;\n    font-size: 16px;\n  }\n  @media (min-width: 768px) {\n    margin-left: 30px;\n    font-size: 16px;\n  }\n"]);return d=function(){return e},e}function O(){var e=Object(c.a)(["\n  height: 30px;\n"]);return O=function(){return e},e}function j(){var e=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  padding: 8px 15px;\n  width: 100%;\n  margin-right: auto;\n  margin-left: auto;\n  \n  @media (min-width: 576px) {\n    max-width: 540px;\n  }\n  \n  @media (min-width: 768px) {\n    max-width: 720px;\n  }\n  \n  @media (min-width: 1200px) {\n    max-width: 1140px;\n  }\n  \n  \n  @media (max-width: 1470px) {\n    max-width: 100%;\n  }\n"]);return j=function(){return e},e}function v(){var e=Object(c.a)(["\n  background-color: #3F434B;\n  color: white;\n"]);return v=function(){return e},e}var w=f.a.header(v()),x=f.a.div(j()),U=f.a.img(O()),E=Object(f.a)(s.b)(d()),k=f.a.div(g()),P=Object(f.a)(m.a)(y()),z=Object(h.a)((function(){var e=Object(p.f)(),t=Object(b.a)(),n=t.UserStore,o=t.AuthStore;return Object(r.useEffect)((function(){n.pullUser()}),[]),i.a.createElement(w,null,i.a.createElement(x,null,i.a.createElement(U,{src:l.a}),i.a.createElement("nav",null,i.a.createElement(E,{to:"/",exact:!0,activeClassName:"active"},"\u9996\u9875"),i.a.createElement(E,{to:"/history",activeClassName:"active"},"\u4e0a\u4f20\u5386\u53f2"),i.a.createElement(E,{to:"/about",activeClassName:"active"},"\u5173\u4e8e\u6211")),i.a.createElement(k,null,n.currentUser?i.a.createElement(i.a.Fragment,null,n.currentUser.attributes.username," ",i.a.createElement(P,{type:"primary",onClick:function(){o.logout()}},"\u6ce8\u9500")):i.a.createElement(i.a.Fragment,null,i.a.createElement(P,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762"),e.push("/login")}},"\u767b\u9646"),i.a.createElement(P,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875\u9762"),e.push("/register")}},"\u6ce8\u518c")))))}));function F(){var e=Object(c.a)(["\n  margin: 0;\n"]);return F=function(){return e},e}function A(){var e=Object(c.a)(["\n  padding: 10px 0;\n  text-align: center;\n  font-size: 12px;\n  color: #AAAAAA\n"]);return A=function(){return e},e}var D=f.a.footer(A()),S=f.a.p(F());var C=function(){return i.a.createElement(D,null,i.a.createElement(S,null,"\u8bf7\u52ff\u4e0a\u4f20\u8fdd\u6cd5\u4e2d\u56fd\u5927\u9646\u6cd5\u5f8b\u7684\u56fe\u7247\uff0c\u8fdd\u8005\u540e\u679c\u81ea\u8d1f\u3002"),i.a.createElement(S,null,"MIT Licensed | Copyright \xa9 2020-present VF25G"))};function L(){var e=Object(c.a)(["\n  display: flex;\n  justify-content: center;\n"]);return L=function(){return e},e}var B=f.a.div(L());var I=function(){return i.a.createElement(B,null,"Loading...")},M=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9)]).then(n.bind(null,316))})),H=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(6),n.e(8)]).then(n.bind(null,317))})),J=Object(r.lazy)((function(){return n.e(10).then(n.bind(null,308))})),N=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,309))})),T=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,310))}));var V=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(z,null),i.a.createElement("main",null,i.a.createElement(r.Suspense,{fallback:i.a.createElement(I,null)},i.a.createElement(p.c,null,i.a.createElement(p.a,{path:"/",exact:!0,component:M}),i.a.createElement(p.a,{path:"/history",component:H}),i.a.createElement(p.a,{path:"/about",component:J}),i.a.createElement(p.a,{path:"/login",component:N}),i.a.createElement(p.a,{path:"/register",component:T})))),i.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(s.a,null,i.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var r=n(0),i=n(10),o=n(20),a=n(21),c=n(2),u=(n(47),n(1)),l=n(17),s=n.n(l);s.a.init({appId:"XJJiY8oiDeuTB7Skns4SHmVH-gzGzoHsz",appKey:"1cncm2qVRBF3BhMu6AdBLLcL",serverURL:"https://xjjiy8oi.lc-cn-n1-shared.com"}),console.log("start...");var p,f,m,b,h,y,g,d,O,j,v,w,x,U,E=function(e,t){var n=new l.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},k=function(e,t){return new Promise((function(n,r){l.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},P=function(){l.User.logOut()},z=function(){return l.User.current()},F=function(e,t){var n=new s.a.Object("Image"),r=new s.a.File(t,e);return n.set("filename",t),n.set("owner",s.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},A=function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,i=void 0===r?10:r,o=new s.a.Query("Image");return o.include("owner"),o.limit(i),o.skip(n*i),o.descending("createdAt"),o.equalTo("owner",s.a.User.current()),new Promise((function(e,t){o.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},D=new(p=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"currentUser",f,this)}return Object(a.a)(e,[{key:"pullUser",value:function(){this.currentUser=z()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),f=Object(c.a)(p.prototype,"currentUser",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(p.prototype,"pullUser",[u.f],Object.getOwnPropertyDescriptor(p.prototype,"pullUser"),p.prototype),Object(c.a)(p.prototype,"resetUser",[u.f],Object.getOwnPropertyDescriptor(p.prototype,"resetUser"),p.prototype),p),S=n(132),C=new(m=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"list",b,this),Object(i.a)(this,"isLoading",h,this),Object(i.a)(this,"hasMore",y,this),Object(i.a)(this,"page",g,this),this.limit=10}return Object(a.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,A({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){S.b.error("\u6570\u636e\u52a0\u8f7d\u5931\u8d25"),console.log(e)})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),b=Object(c.a)(m.prototype,"list",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=Object(c.a)(m.prototype,"isLoading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=Object(c.a)(m.prototype,"hasMore",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=Object(c.a)(m.prototype,"page",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(c.a)(m.prototype,"append",[u.f],Object.getOwnPropertyDescriptor(m.prototype,"append"),m.prototype),Object(c.a)(m.prototype,"find",[u.f],Object.getOwnPropertyDescriptor(m.prototype,"find"),m.prototype),Object(c.a)(m.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(m.prototype,"reset"),m.prototype),m),L=new(d=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"filename",O,this),Object(i.a)(this,"file",j,this),Object(i.a)(this,"isUploading",v,this),Object(i.a)(this,"serverFile",w,this)}return Object(a.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(t,n){F(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){S.b.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.isUploading=!1,this.serverFile=null}}]),e}(),O=Object(c.a)(d.prototype,"filename",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=Object(c.a)(d.prototype,"file",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=Object(c.a)(d.prototype,"isUploading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(c.a)(d.prototype,"serverFile",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(d.prototype,"setFilename",[u.f],Object.getOwnPropertyDescriptor(d.prototype,"setFilename"),d.prototype),Object(c.a)(d.prototype,"setFile",[u.f],Object.getOwnPropertyDescriptor(d.prototype,"setFile"),d.prototype),Object(c.a)(d.prototype,"upload",[u.f],Object.getOwnPropertyDescriptor(d.prototype,"upload"),d.prototype),Object(c.a)(d.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(d.prototype,"reset"),d.prototype),d),B=new(x=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"values",U,this)}return Object(a.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){k(e.values.username,e.values.password).then((function(e){D.pullUser(),t(e)})).catch((function(e){D.resetUser(),S.b.error("\u767b\u5f55\u5931\u8d25"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){E(e.values.username,e.values.password).then((function(e){D.pullUser(),t(e)})).catch((function(e){e.toString().indexOf("Username has already been taken")?S.b.error("\u8d26\u6237\u5df2\u5b58\u5728"):S.b.error("\u6ce8\u518c\u5931\u8d25"),D.resetUser(),n(e)}))}))}},{key:"logout",value:function(){P(),D.resetUser(),C.reset(),L.reset()}}]),e}(),U=Object(c.a)(x.prototype,"values",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(c.a)(x.prototype,"setUsername",[u.f],Object.getOwnPropertyDescriptor(x.prototype,"setUsername"),x.prototype),Object(c.a)(x.prototype,"setPassword",[u.f],Object.getOwnPropertyDescriptor(x.prototype,"setPassword"),x.prototype),Object(c.a)(x.prototype,"login",[u.f],Object.getOwnPropertyDescriptor(x.prototype,"login"),x.prototype),Object(c.a)(x.prototype,"register",[u.f],Object.getOwnPropertyDescriptor(x.prototype,"register"),x.prototype),Object(c.a)(x.prototype,"logout",[u.f],Object.getOwnPropertyDescriptor(x.prototype,"logout"),x.prototype),x),I=Object(r.createContext)({AuthStore:B,UserStore:D,ImageStore:L,HistoryStore:C});window.stores={AuthStore:B,UserStore:D,ImageStore:L,HistoryStore:C};var M=function(){return Object(r.useContext)(I)}},74:function(e,t,n){e.exports=n.p+"static/media/logo.b1716509.svg"},95:function(e,t,n){e.exports=n(130)}},[[95,4,5]]]);
//# sourceMappingURL=main.33a75ebc.chunk.js.map